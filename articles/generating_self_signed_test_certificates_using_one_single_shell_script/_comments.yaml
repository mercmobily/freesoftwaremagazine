-
    name: 'Gong Cheng'
    mail: ''
    subject: 'update on key passphrases of client and server keys'
    hostname: 75.26.137.116
    created: '1219886682'
    body: "In the original script, even though it is asking for challenge password for client and server keys, it is not really encrypting the keys. It is ok just for testing purposes.\r\n\r\nI have the following patch actually just to remove the redundant prompt part:\r\n\r\ndiff -upN certgen.saved certgen\r\n--- certgen.saved       2008-08-27 16:02:47.000000000 -0700\r\n+++ certgen     2008-08-27 16:43:00.000000000 -0700\r\n@@ -62,7 +62,6 @@ default_bits          = 1024\r\n default_md             = sha1\r\n default_keyfile        = privkey.pem\r\n distinguished_name     = req_distinguished_name\r\n-attributes             = req_attributes\r\n x509_extensions        = v3_ca\r\n string_mask = MASK:0x2002\r\n [ req_distinguished_name ]\r\n@@ -81,11 +80,6 @@ commonName                   = Common Name (eg, your nam\r\n commonName_max                 = 64\r\n emailAddress                   = Email Address\r\n emailAddress_max               = 64\r\n-[ req_attributes ]\r\n-challengePassword              = A challenge password\r\n-challengePassword_min          = 4\r\n-challengePassword_max          = 20\r\n-unstructuredName               = An optional company name\r\n [ usr_cert ]\r\n basicConstraints=CA:FALSE\r\n nsComment                      = \"OpenSSL Generated Certificate\"\r\n@@ -195,7 +189,10 @@ client)\r\n     fi\r\n     if [ $client_cert_file != `cat serial.old`.pem ]\r\n     then\r\n-        rm `cat serial.old`.pem\r\n+        if [ -f `cat serial.old`.pem ]\r\n+        then\r\n+          rm `cat serial.old`.pem\r\n+        fi\r\n     fi\r\n     ;;\r\n server)\r\n@@ -230,7 +227,10 @@ server)\r\n     fi\r\n     if [ $server_cert_file != `cat serial.old`.pem ]\r\n     then\r\n-        rm `cat serial.old`.pem\r\n+        if [ -f `cat serial.old`.pem ]\r\n+        then\r\n+            rm `cat serial.old`.pem\r\n+        fi\r\n     fi\r\n     ;;\r\n *) usage; exit 1;;\r\n"
